!function(){"use strict";function r(r,e){var n,o;for(n in e)o=e[n],r[n]=o;return r}function e(){return{bower:{jsonFile:"bower.json",pkgDir:"bower_components"},npm:{jsonFile:"package.json",pkgDir:"node_modules"}}}function n(r){return"[object Array]"===Object.prototype.toString.call(r)}function o(e,n){var o,i=e.dependencies||{},t=[];n.includeDevPackages&&(i=r(i,e.devDependencies||{}));for(o in i)-1==n.ignore.indexOf(o)?t.push(o):p("Ignoring ".success+f.info(o));return t}function i(r,e){var n=[new RegExp(e+".min.js$"),new RegExp(e+".js$")],o=[],i=s.readdirSyncRecursive(a.join(r,e));return i.forEach(function(r){n.forEach(function(e,n){r.match(e)&&(o[n]=r)})}),o.filter(function(r){return"undefined"!=typeof r}).shift()}function t(r,e,o,t,c){var s=function(r,e){return u.existsSync(r)?!0:(p("Package ".warn+f.info(e)+" file at ".warn+f.info(r)+" does not exist.".warn),!1)},d=function(r,n){return r=a.resolve(e,n,r)},l=function(r){var o=c[r]||i(e,r),t=function(e){return e=d(e,r),s(e,r)?e:!1};return n(o)?o=o.map(t).filter(function(r){return!!r}):o&&(o=t(o)),(!o||n(o)&&0===o.length)&&(p("Package ".warn+f.info(r)+" has no valid paths. Recommend override.".warn),o=void 0),o},g={};return r.forEach(function(r){g.hasOwnProperty(r)||(g[r]=l(r))}),g}function c(r,n){var i,c,s=e()[r],p=[],d={};if(!s)throw new Error("Packager ".error+f.info(r)+" not supported.".error);if(i=a.join(n.rootDir,s.jsonFile),!u.existsSync(i))throw new Error("Packager ".error+f.info(r)+" missing JSON file ".error+f.info(s.jsonFile)+" @ ".error+f.info(i));if(c=a.join(n.rootDir,s.pkgDir),!u.existsSync(c))throw new Error("Packager ".error+f.info(r)+" missing package directory ".error+f.info(s.pkgDir)+" @ ".error+f.info(c));return p=o(require(i),n),n.include&&(p=p.concat(n.include)),n.secondaryDeps&&!function(r,e,n){for(var i,t,c,s=r.length;s--;)i=r[s],t=a.join(n.rootDir,e.pkgDir,i,e.jsonFile),c=o(require(t),n),Array.prototype.splice.apply(r,[s,0].concat(c))}(p,s,n),d=t(p,c,s.jsonFile,s.defaultMain,n.overrides)}var s=require("wrench"),a=require("path"),u=require("fs"),f=require("colors"),p=function(){arguments[0]="["+f.grey("SOURCE DEPS")+"] "+arguments[0],console.log.apply(this,arguments)};f.setTheme({info:"cyan",warn:"yellow",error:"red",success:"green"}),module.exports=function(e){var o,i={packagers:["npm","bower"],overrides:{},includeDevPackages:!1,secondaryDeps:!1,logOutput:!1,rootDir:process.cwd(),order:[],ignore:[],include:[]},t=[],s={},u=function(r,e){var o;return(o=s[r])?e?void Array.prototype.splice.apply(t,[e,0].concat(o)):n(o)?void(t=t.concat(o)):void t.push(o):void 0};e=r(i,e),e.rootDir=a.resolve(e.rootDir),e.logOutput||(p=function(){}),e.packagers.forEach(function(n){s=r(s,c(n,e))}),e.order.forEach(function(r,e){u(r,e),delete s[r]});for(o in s)u(o);return p("Loaded ".success+f.info(t.length)+" dependent files.".success),t}}();