!function(){"use strict";function r(r,e){var n,o=r.dependencies||{},t=[];e.includeDevPackages&&(o=p.merge(o,r.devDependencies||{}));for(n in o)-1==e.exclude.indexOf(n)?t.push(n):i("Excluding ".success+u.info(n));return t}function e(r,e){var n=[new RegExp(e+".js$"),new RegExp(e+".min.js$")],o=[],t=c.readdirSyncRecursive(a.join(r,e));return t.forEach(function(r){n.forEach(function(e,n){r.match(e)&&(o[n]=r)})}),o.filter(function(r){return"undefined"!=typeof r}).shift()}function n(r,n,o){var t=function(r,e){return s.existsSync(r)?!0:(i("Package ".warn+u.info(e)+" file at ".warn+u.info(r)+" does not exist.".warn),!1)},c=function(r,e){return r=a.resolve(n,e,r)},p=function(r){var a=o[r]||e(n,r),s=function(e){return e=c(e,r),t(e,r)?e:!1};return f.isArray(a)?a=a.map(s).filter(function(r){return!!r}):a&&(a=s(a)),(!a||f.isArray(a)&&0===a.length)&&(i("Package ".warn+u.info(r)+" has no valid paths. Recommend override.".warn),a=void 0),a},l={};return r.forEach(function(r){l.hasOwnProperty(r)||(l[r]=p(r))}),l}function o(r,e){var n,o;return e.forEach(function(e){o=a.join(r,e),!n&&s.existsSync(o)&&(n=o)}),n}function t(e,t){var c,p,l=t.packagerData[e],d=[],g={};if(!l)throw new Error("Packager ".error+u.info(e)+" not supported.".error);if(c=o(t.rootDir,l.manifests),!c)throw new Error("Packager ".error+u.info(e)+" has no valid manifest files ".error+u.info(l.manifests)+" @ ".error);if(p=a.join(t.rootDir,l.pkgDir),!s.existsSync(p))throw new Error("Packager ".error+u.info(e)+" missing package directory ".error+u.info(l.pkgDir)+" @ ".error+u.info(p));return d=r(require(c),t),t.only.length>0?(i("Limiting to: ".success+u.info(t.only)),d=f.arrayIntersect(d,t.only)):t.include&&(d=d.concat(t.include)),t.recursive&&(d=function(e,n,t){function c(e){function c(e){var f,p=o(a.join(t.rootDir,n.pkgDir,e),n.manifests);return p?(t.includeDevPackages=!1,f=r(require(p),t),f&&(Array.prototype.splice.apply(s,[0,0].concat(f)),f.forEach(function(r){return c(r)})),void 0):(i("Child Package".warn+" of "+u.info(e)+" does not contain a valid manifest. Continuing..."),void 0)}var s=[];return c(e),s}var s=[];return s=e.slice(),e.forEach(function(r){Array.prototype.splice.apply(s,[s.indexOf(r),0].concat(c(r)))}),s}(d,l,t)),g=n(d,p,t.overrides)}var i,c=require("wrench"),a=require("path"),s=require("fs"),u=require("colors"),f=require("./utils.js"),p=require("./obj-utils.js"),l=require("./packager-data.json");u.setTheme({info:"cyan",warn:"yellow",error:"red",success:"green"}),module.exports=function(r){var e,n={packagers:["npm","bower"],packagerData:{},overrides:{},includeDevPackages:!1,recursive:!1,logOutput:!1,rootDir:process.cwd(),order:[],exclude:[],include:[],only:[]},o=[],c={},s=function(r,e){var n;return(n=c[r])?e?(Array.prototype.splice.apply(o,[e,0].concat(n)),void 0):f.isArray(n)?(o=o.concat(n),void 0):(o.push(n),void 0):void 0};n=p.merge(n,r),n.rootDir=a.resolve(n.rootDir),n.packagerData=p.merge(l,n.packagerData),i=n.logOutput?f.log:function(){},n.packagers.forEach(function(r){c=p.merge(c,t(r,n))}),n.order.forEach(function(r,e){s(r,e),delete c[r]});for(e in c)s(e);return i("Loaded ".success+u.info(o.length)+" dependent files.".success),o}}(),function(){"use strict";var r;r=function(){},r.prototype.toType=function(r){return{}.toString.call(r).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},r.prototype.clone=function(r){var e;if(null===r||"object"!=typeof r)return r;if(r instanceof Date)return e=new Date,e.setTime(r.getTime()),e;if(r instanceof Array){e=[];for(var n=0,o=r.length;o>n;n++)e[n]=this.clone(r[n]);return e}if(r instanceof Object){e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=this.clone(r[t]));return e}throw new Error("Cannot copy supplied object.")},r.prototype.merge=function(){for(var r,e=[].slice.apply(arguments),n=e.reverse(),o=n.length,t={};o--;)r=n[o],t=this._mergeObjs(t,r);return t},r.prototype._mergeObjs=function(r,e){var n,o,t,i;i=this.clone(r);for(n in e)t=r[n],o=e[n],i[n]=this.isObject(t)&&this.isObject(o)?this._mergeObjs(t,o):o;return i},r.prototype.isObject=function(r){return"object"===this.toType(r)},module.exports=new r}(),function(){"use strict";var r=require("colors");module.exports={log:function(){arguments[0]="["+r.grey("SOURCE DEPS")+"] "+arguments[0],console.log.apply(this,arguments)},isArray:function(r){return"[object Array]"===Object.prototype.toString.call(r)},arrayIntersect:function(r,e){var n;return n=r.filter(function(r){return-1!=e.indexOf(r)})}}}();